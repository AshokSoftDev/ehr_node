// Master data models: Insurance, Allergy

model Insurance {
  i_id           Int      @id @default(autoincrement())
  type           String
  company        String
  policy         String
  policyNo       String
  validationFrom DateTime
  validationTo   DateTime
  notes          String?

  // Status & Audit
  status    Int       @default(1) // 1=active, 0=inactive
  createdAt DateTime  @default(now())
  createdBy String?
  updatedAt DateTime  @updatedAt
  updatedBy String?
  deletedAt DateTime?
  deletedBy String?

  @@index([status])
  @@index([createdAt])
  @@index([deletedAt])
}

model Allergy {
  allergy_id  Int    @id @default(autoincrement())
  allergyName String
  allergyType String

  // Status & Audit
  status    Int       @default(1) // 1=active, 0=inactive
  createdAt DateTime  @default(now())
  createdBy String?
  updatedAt DateTime  @updatedAt
  updatedBy String?
  deletedAt DateTime?
  deletedBy String?

  // Relations
  patientAllergies PatientAllergy[]

  @@index([status])
  @@index([createdAt])
  @@index([deletedAt])
}

model Location {
  location_id   Int             @id @default(autoincrement())
  location_name String
  address       String?
  city          String
  state         String
  clinicalNotes ClinicalNotes[]

  // Status & Audit
  status    Int       @default(1) // 1=active, 0=inactive
  active    Boolean   @default(true)
  createdAt DateTime  @default(now())
  createdBy String?
  updatedAt DateTime  @updatedAt
  updatedBy String?
  deletedAt DateTime?
  deletedBy String?

  @@index([status])
  @@index([active])
  @@index([createdAt])
  @@index([deletedAt])
}

model Drug {
  drug_id      Int     @id @default(autoincrement())
  drug_generic String
  drug_name    String
  drug_type    String
  drug_dosage  String
  drug_measure String
  instruction  String?

  prescriptions         Prescription[]         @relation("PrescriptionDrug")
  prescriptionTemplates PrescriptionTemplate[] @relation("PrescriptionTemplateDrug")

  // Status & Audit
  status    Int       @default(1) // 1=active, 0=inactive
  createdAt DateTime  @default(now())
  createdBy String?
  updatedAt DateTime  @updatedAt
  updatedBy String?
  deletedAt DateTime?
  deletedBy String?

  @@index([status])
  @@index([createdAt])
  @@index([deletedAt])
}

model DocumentType {
  document_type_id Int     @id @default(autoincrement())
  type_name        String  @unique
  description      String?

  // Status & Audit
  status    Int       @default(1) // 1=active, 0=inactive
  createdAt DateTime  @default(now())
  createdBy String?
  updatedAt DateTime  @updatedAt
  updatedBy String?
  deletedAt DateTime?
  deletedBy String?

  // Relations
  visitDocuments VisitDocument[]

  @@index([status])
  @@index([createdAt])
  @@index([deletedAt])
}
